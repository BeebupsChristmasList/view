<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Beebup's Christmas List - A professional list for a professional Beebup</title>
    
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700&family=Mountains+of+Christmas:wght@700&display=swap" rel="stylesheet">
    
    <!-- Custom Tailwind Configuration -->
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        'sans': ['Inter', 'sans-serif'],
                        'display': ['"Mountains of Christmas"', 'cursive'],
                    },
                    colors: {
                        'festive-green': '#166534', // A deep green
                        'festive-red': '#DC2626',   // A bright red
                        'festive-gold': '#FBBF24',  // A warm gold
                        'night-bg': '#111827',     // A dark blue/black
                    }
                }
            }
        }
    </script>
    
    <!-- Custom CSS for Animations and Layout -->
    <style>
        /* Custom cursor styles */
        body {
            /* Hide the default cursor on desktops */
            cursor: none;
        }
        .cursor-dot, .cursor-outline {
            display: none; /* Hidden by default, shown on md: */
            position: fixed;
            top: 0;
            left: 0;
            pointer-events: none;
            z-index: 9999;
            transform: translate(-50%, -50%);
            transition: all 0.1s linear;
        }
        .cursor-dot {
            width: 8px;
            height: 8px;
            background-color: white;
            border-radius: 50%;
        }
        .cursor-outline {
            width: 40px;
            height: 40px;
            border: 2px solid white;
            border-radius: 50%;
            transition: all 0.15s ease-out;
        }
        /* Show cursor only on non-touch devices */
        @media (min-width: 768px) and (pointer: fine) {
            body {
                cursor: none;
            }
            .cursor-dot, .cursor-outline {
                display: block;
            }
        }
        /* Cursor grow effect */
        .cursor-outline.grow {
            transform: translate(-50%, -50%) scale(1.5);
            background-color: rgba(255, 255, 255, 0.1);
        }

        /* Festive text glow animation */
        @keyframes festiveGlow {
            0% { text-shadow: 0 0 3px rgba(255, 255, 255, 0.1); }
            50% { text-shadow: 0 0 8px rgba(255, 255, 255, 0.4); }
            100% { text-shadow: 0 0 3px rgba(255, 255, 255, 0.1); }
        }
        /* Apply glow to festive colors */
        .text-festive-red {
            animation: festiveGlow 2.5s infinite alternate;
        }
        .text-festive-gold {
            animation: festiveGlow 2s infinite alternate;
        }


        /* CSS-Only Snowfall Animation */
        .snowflake {
            position: absolute;
            top: -20px;
            background: white;
            border-radius: 50%;
            opacity: 0.8;
            animation: fall linear infinite;
        }
        /* Keyframes for snow are now generated by JS for randomness */


        /* Hero text fade-in */
        .hero-text {
            animation: fadeIn 2s ease-out;
            /* Add transition for smooth parallax scrolling */
            transition: opacity 0.2s linear, transform 0.2s linear;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        /* UPDATED: Scroll-reveal animation (stronger effect) */
        .reveal-item {
            opacity: 0;
            transform: translateY(40px); /* Increased from 20px */
            transition: opacity 1s ease-out, transform 1s ease-out; /* Increased from 0.8s */
            /* Delay is now set by JS for stagger effect */
            transition-delay: var(--reveal-delay, 0s);
        }
        .reveal-item.is-visible {
            opacity: 1;
            transform: translateY(0);
        }
        
        .gift-card {
            /* UPDATED: This transition now smooths the mobile :active state */
            transition: transform 0.4s cubic-bezier(0.23, 1, 0.32, 1);
            /* Added gold border for "present" feel */
            border-top: 4px solid #FBBF24; /* festive-gold */
        }
        
        /* Style for the link, to make it fill the card */
        .gift-card-link {
            display: block;
            text-decoration: none;
            /* This makes the tilt/reveal apply to the link wrapper */
            transition: transform 0.4s cubic-bezier(0.23, 1, 0.32, 1);
        }

        /* Simple tap-to-scale effect for touch devices */
        .gift-card-link:active .gift-card {
            transform: scale(1.05);
            transition: transform 0.1s ease-out;
        }


        /* UPDATED: Countdown Timer Styles (Responsive) */
        #countdown-timer {
            text-align: center;
            margin: 4rem auto;
            max-width: 600px;
        }
        #countdown-timer .countdown-title {
            font-family: 'Mountains of Christmas', cursive;
            font-size: 2rem; /* 32px */
            color: #FBBF24; /* festive-gold */
            sm:font-size: 2.5rem; /* 40px */
        }
        .countdown-blocks {
            display: flex;
            justify-content: center;
            gap: 0.5rem; /* Tighter gap on mobile */
            margin-top: 1rem;
            sm:gap: 1rem; /* Wider gap on desktop */
        }
        .countdown-block {
            background: rgba(255, 255, 255, 0.05);
            padding: 0.5rem; /* Smaller padding on mobile */
            border-radius: 8px;
            min-width: 60px; /* Smaller min-width on mobile */
            sm:padding: 1rem 1.5rem; /* Original padding */
            sm:min-width: 80px; /* Original min-width */
        }
        .countdown-block span {
            display: block;
        }
        .countdown-number {
            font-size: 1.5rem; /* 24px */
            font-weight: 700;
            color: white;
            line-height: 1;
            sm:font-size: 2.25rem; /* 36px */
        }
        .countdown-label {
            font-size: 0.75rem; /* 12px */
            color: #d1d5db; /* gray-300 */
            text-transform: uppercase;
            margin-top: 0.25rem;
            sm:font-size: 0.875rem; /* 14px */
        }

        /* NEW: Calculator Styles */
        /* Basic styles for inputs and selects in the calculator */
        .calculator-input {
            background-color: #374151; /* gray-700 */
            border: 1px solid #4B5563; /* gray-600 */
            color: white;
            border-radius: 0.375rem; /* rounded-md */
            padding: 0.5rem 0.75rem;
            width: 100%;
            margin-top: 0.25rem;
            transition: border-color 0.2s, box-shadow 0.2s;
        }
        .calculator-input:focus {
            outline: none;
            border-color: #FBBF24; /* festive-gold */
            box-shadow: 0 0 0 2px rgba(251, 191, 36, 0.3);
        }
        /* Fix for select arrow in dark mode */
        .calculator-select {
            background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%239ca3af' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='M6 8l4 4 4-4'/%3e%3c/svg%3e");
            background-position: right 0.5rem center;
            background-repeat: no-repeat;
            background-size: 1.5em 1.5em;
            -webkit-appearance: none;
            -moz-appearance: none;
            appearance: none;
            padding-right: 2.5rem;
        }
        .calculator-btn {
            display: inline-block;
            background-color: #166534; /* festive-green */
            color: white;
            font-weight: 700;
            padding: 0.5rem 1rem;
            border-radius: 0.375rem; /* rounded-md */
            text-align: center;
            cursor: pointer;
            transition: background-color 0.2s;
            border: none;
            margin-top: 0.5rem;
            width: 100%;
        }
        .calculator-btn:hover {
            background-color: #15803d; /* darker green */
        }
        .calculator-btn-red {
            background-color: #DC2626; /* festive-red */
            font-weight: 700;
            color: white;
            border-radius: 9999px; /* rounded-full */
            width: 1.5rem;
            height: 1.5rem;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.75rem; /* text-xs */
            line-height: 1;
            border: none;
            cursor: pointer;
            transition: background-color 0.2s;
            flex-shrink: 0; /* Prevent shrinking */
        }
        .calculator-btn-red:hover {
            background-color: #b91c1c; /* darker red */
        }

        /* --- NEW: Info Button and Popup Styles --- */
        
        /* Make card content area a positioning context */
        .gift-card .p-5 {
            position: relative;
        }

        /* Info Button Styles */
        .info-btn {
            position: absolute;
            top: 1rem; /* 16px */
            right: 1rem; /* 16px */
            width: 1.5rem; /* 24px */
            height: 1.5rem; /* 24px */
            border-radius: 50%;
            background-color: #6b7280; /* gray-500 */
            color: white;
            font-weight: bold;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            z-index: 20;
            transition: background-color 0.2s;
            font-style: normal; /* In case 'i' tag is used */
            line-height: 1; /* Center the 'i' */
        }
        .info-btn:hover {
            background-color: #4b5563; /* gray-600 */
        }

        /* Info Popup Styles */
        .info-popup {
            position: absolute;
            top: 3rem; /* 48px - below the button */
            right: 1rem; /* 16px */
            width: 200px;
            background-color: #1f2937; /* gray-800 */
            color: white;
            padding: 0.75rem;
            border-radius: 0.375rem; /* rounded-md */
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            z-index: 30;
            font-size: 0.875rem; /* 14px */
            line-height: 1.4;
            opacity: 0;
            visibility: hidden;
            transform: translateY(-10px);
            transition: opacity 0.2s ease-out, visibility 0.2s ease-out, transform 0.2s ease-out;
        }

        .info-popup.is-visible {
            opacity: 1;
            visibility: visible;
            transform: translateY(0);
        }
        /* --- End of Info Button Styles --- */
        
    </style>
</head>
<body class="bg-night-bg font-sans text-gray-200">

    <!-- NEW: HTML Audio Tag -->
    <!-- This is hidden. 'src' points to the file you'll need to add. -->
    <audio id="bg-music" src="./jingle-bells.mp3" loop></audio>

    <!-- Custom Cursor Elements -->
    <div class="cursor-dot" id="cursor-dot"></div>
    <div class="cursor-outline" id="cursor-outline"></div>

    <!-- Snowfall Container (z-0) -->
    <div class="fixed top-0 left-0 w-full h-full overflow-hidden z-0" aria-hidden="true" id="snow-container">
        <!-- Snowflakes will be added here by JavaScript -->
    </div>

    <!-- NEW: Wonderland Entry Popup -->
    <div id="wonderland-overlay" class="fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-md cursor-pointer transition-opacity duration-500">
        <h2 class="font-display text-5xl text-white text-center p-4">
            enter the wonderland
        </h2>
    </div>

    <!-- Main Content (z-10 to be above the snow) -->
    <!-- UPDATED: Added blur and ID -->
    <div id="main-content" class="relative z-10 blur-md transition-all duration-500">

        <!-- Hero Section -->
        <header class="min-h-screen flex flex-col items-center justify-center text-center p-4 overflow-hidden">
            <div class="hero-text">
                <h1 class="font-display text-7xl md:text-9xl text-white">Beebup's</h1>
                <h2 class="font-display text-5xl md:text-7xl text-festive-red">Christmas List</h2>
            </div>
        </header>


        <!-- Responsive Gift Grid Section -->
        <!-- UPDATED: grid-cols-2 for mobile -->
        <section 
            id="gift-grid" 
            class="gift-grid container mx-auto max-w-6xl p-4 md:p-8 grid grid-cols-2 md:grid-cols-2 lg:grid-cols-3 gap-4 md:gap-8 lg:gap-12"
        >
            <!-- Gift items will be dynamically injected here for all devices -->
        </section>

        <!-- ========================================================== -->
        <!-- NEW: Gift Calculator Section -->
        <!-- ========================================================== -->
        <section id="gift-calculator" class="container mx-auto max-w-6xl p-4 md:p-8">
            <h2 class="font-display text-4xl sm:text-5xl text-festive-gold text-center mb-8">
                Gift Calculator
            </h2>
            
            <div class="max-w-4xl mx-auto bg-gray-900/50 backdrop-blur-sm rounded-lg shadow-2xl p-6 md:p-8 border border-gray-700">
                <div class="md:grid md:grid-cols-2 md:gap-8">
                    
                    <!-- Column 1: Add Items -->
                    <div class="space-y-6">
                        <!-- Form 1: Add from List -->
                        <div class_A="bg-gray-800 p-4 rounded-lg shadow-inner">
                            <label for="existing-gift-select" class="block text-lg font-semibold text-white mb-2">
                                Add from Beebup's List
                            </label>
                            <select id="existing-gift-select" class="calculator-input calculator-select">
                                <option value="">Select a gift...</option>
                                <!-- Options will be populated by JS -->
                            </select>
                            <button id="add-existing-btn" class="calculator-btn">
                                Add to Basket
                            </button>
                        </div>
                        
                        <!-- Form 2: Add Custom Item -->
                        <div class="bg-gray-800 p-4 rounded-lg shadow-inner">
                            <h3 class="text-lg font-semibold text-white mb-2">
                                Add Custom Item
                            </h3>
                            <div class="space-y-3">
                                <div>
                                    <label for="custom-gift-name" class="block text-sm font-medium text-gray-300">
                                        Item Name
                                    </label>
                                    <input type="text" id="custom-gift-name" class="calculator-input" placeholder="e.g., Lamborghini">
                                </div>
                                <div>
                                    <label for="custom-gift-price" class="block text-sm font-medium text-gray-300">
                                        Price ($)
                                    </label>
                                    <input type="number" id="custom-gift-price" class="calculator-input" placeholder="e.g., 19.99" min="0" step="0.01">
                                </div>
                                <button id="add-custom-btn" class="calculator-btn">
                                    Add Custom Item
                                </button>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Column 2: Cart and Total -->
                    <div class="mt-8 md:mt-0 bg-gray-800 p-4 rounded-lg shadow-inner">
                        <h3 class="text-2xl font-bold text-white mb-4">Your Basket</h3>
                        
                        <!-- Cart List -->
                        <ul id="calculator-list" class="space-y-2 h-48 overflow-y-auto pr-2">
                            <!-- Cart items will be populated by JS -->
                            <!-- Example:
                            <li class="flex justify-between items-center bg-gray-700 p-2 rounded">
                                <span class="text-gray-200">Stream Deck Mini</span>
                                <span class="font-semibold text-white">$57.99</span>
                                <button class="calculator-btn-red">&times;</button>
                            </li>
                            -->
                        </ul>
                        
                        <div class="border-t border-gray-600 mt-4 pt-4">
                            <h4 class="text-lg font-semibold text-gray-300 uppercase">Total Cost</h4>
                            <p id="calculator-total" class="text-4xl font-bold text-festive-gold mt-1">
                                $0.00
                            </p>
                        </div>
                    </div>
                    
                </div>
            </div>
        </section>
        <!-- ========================================================== -->
        <!-- END: Gift Calculator Section -->
        <!-- ========================================================== -->


        <!-- Christmas Countdown Timer -->
        <section id="countdown-timer">
            <h2 class="countdown-title text-festive-gold">Countdown to Christmas</h2>
            <div class="countdown-blocks">
                <div class="countdown-block">
                    <span id="countdown-days" class="countdown-number">00</span>
                    <span class="countdown-label">Days</span>
                </div>
                <div class="countdown-block">
                    <span id="countdown-hours" class="countdown-number">00</span>
                    <span class="countdown-label">Hours</span>
                </div>
                <div class="countdown-block">
                    <span id="countdown-minutes" class="countdown-number">00</span>
                    <span class="countdown-label">Minutes</span>
                </div>
                <div class="countdown-block">
                    <span id="countdown-seconds" class="countdown-number">00</span>
                    <span class="countdown-label">Seconds</span>
                </div>
            </div>
            <h3 id="countdown-message" class="countdown-title text-festive-red" style="display:none; margin-top: 1rem;">Merry Christmas!</h3>
        </section>

        <!-- NEW: Footer -->
        <footer class="text-center p-8 mt-8">
            <p class="font-display text-4xl text-festive-gold">Happy Birthday Jesus!</p>
        </footer>

    </div>

    <script>
        // ------------------------------------------------------------------
        // ðŸŽ„ðŸŽ ATTENTION! ADD/EDIT CHRISTMAS GIFTS HERE! ðŸŽðŸŽ„
        // ------------------------------------------------------------------
        const giftList = [
            {
                name: "DJI RS4 Mini Combo (Camera Gimbal)",
                price: "$389.00",
                imageUrl: "https://m.media-amazon.com/images/I/61gLx01XtlL._AC_SX679_.jpg",
                buyUrl: "https://www.amazon.com/DJI-Stabilizer-Panasonic-Intelligent-Briefcase/dp/B0DJ2WQ498/ref=sr_1_1?crid=3IJJFYYW3TD78&dib=eyJ2IjoiMSJ9.zRFhJ5j-UDaAxfn-j-x7y27vRr5AsfOVlst3i6l5Pd3fLwbeE7fu1QGHHyUi-xYQusJSiw0ZCXbEfQBmHN-DL8uPW1S0j99Tws1EJhh7Z2nyt5B1vdtzMUosF4vjWSq1G6bAWbDsSatwgBYi8UWXZrGCHYSfna9hHWqAh26SMAAiOkBfDpRIbnWcHWdDSsSTAKI63B1mS5mqYo3lz1Ad0kWRTKcj2RUiZSFLND4GGDk.XUnbwyyHrYMUg4djgpqDOLR5V13DVEdVdq4lGtuqrcQ&dib_tag=se&keywords=dji%2Brs4mini&qid=1762135671&sprefix=dji%2Brs4mini%2Caps%2C169&sr=8-1&th=1",
                info: "with the dji ban, these will become very hard to find",
                tagline: {
                    text: "SALE - 15% OFF",
                    color: "text-festive-red"
                }
            },
            {
                name: "EOS R6 Mark II RF24-105mm F4 L IS USM Lens Kit",
                price: "$3,249",
                imageUrl: "https://s7d1.scene7.com/is/image/canon/5666C011_eos-r6-mark-ii-rf24-105mm-f4-l-is-usm_primary?fmt=webp-alpha&wid=800",
                buyUrl: "https://www.usa.canon.com/shop/p/eos-r6-mark-ii-rf24-105mm-f4-l-is-usm-lens-kit?color=Black&type=New",
                tagline: {
                    text: "Sale",
                    color: "text-festive-red"
                }
            },
            {
                name: "SD cards â€“ 128GB â€“ pack of 2 (I would love more than 1)",
                price: "$29.95",
                imageUrl: "https://m.media-amazon.com/images/I/71Ow-Ih7KNL._AC_SL1500_.jpg",
                buyUrl: "https://www.amazon.com/SanDisk-256GB-microSDXC-Memory-Adapter/dp/B0B7NVV55M/ref=sr_1_1?crid=30P478AYLW9HX&dib=eyJ2IjoiMSJ9.yrP4UaR9Qm2nBvVQHjgYJEpNXonDIQwZokvEC0EQy-Wr17_gckcoFIOZ2e-Wo9DjMzIV_lmrdjPGrV5vU5MX-9SE4jkwDOJnst5HtdJeLtWkmbSuCZLPEsoolA617tlBqpb9e20Gml2voyr3u5NuqoLkkCnJpPYVhd7EC62GRQd4dsRliRXByAt8pTYuMZ9lnkLVtxPnt4WNCw__SNySj-L_JRurkvDhlMeLrWdz2R5CRp9B1Kcc18dVVPYLItWz8sD6dhRBj0jz0BrXGES9Yo06NEZhNi7jfji8KANp6aI.I8VlhnlApfmY9rnxpctnI3KTwI8_l3UCaGz0hNUxnOk&dib_tag=se&keywords=sandisk%2Bmicro%2Bsd%2Bcard&qid=1761916193&s=electronics&sprefix=sandisk%2Bmicro%2Bsd%2Bcard%2Celectronics%2C123&sr=1-1&th=1",
                info: "this one got $4 more expensive",
            },
            {
                name: "GeoFS HD (higher resolution for my flight simulator)",
                price: "$12.81",
                imageUrl: "https://www.geo-fs.com/images/squareposter.jpg",
                buyUrl: "https://placehold.co/1400x900/10B981/FFFFFF?text=I would need to log you into my account on Christmas",
                info: "I would need to log you into my account on Christmas"
            },
            {
                name: "Stream Deck Mini",
                price: "$57.99",
                imageUrl: "https://m.media-amazon.com/images/I/61w+a4IDpsL._AC_SX679_.jpg",
                buyUrl: "https://www.amazon.com/Elgato-Stream-Deck-Mini-customizable/dp/B07DYRS1WH/ref=sr_1_3?crid=291JDZO5OSXUE&dib=eyJ2IjoiMSJ9.sO3yMvmKJlAh2MIAFKbXxqShKupox8EHmver9cmgDoDJ8wMcxKSCmatvv3Y1iL4HqhiFHKLXAy1O5htauPATDrIjdCUY1vx3kVomxicC-lk4xD2KGfOc8oC_n_q2k4m6XfuzfW0kz74kUVvhLxQK1oOLNlK4TMLBRMWzj-ut-e2JjG-vwNrr923S70oQ6guugN_azepMPWNh7e_mxvYQcSXN1Sr2G94qMDz9G8CYCEI.lEovS6Rv6YGQZxGK53KASpoCGg4_6xe5ghorUsg3PoA&dib_tag=se&keywords=stream+deck+mini&qid=1762126248&sprefix=stream+deck+mini%2Caps%2C154&sr=8-3"
            },
            {
                name: "RGB Tube Light with Desk Tripod",
                price: "$62.79",
                imageUrl: "https://m.media-amazon.com/images/I/61E-mjbY+bL._AC_SX679_.jpg",
                buyUrl: "https://www.amazon.com/Magnetic-Handheld-Photography-2500K-8500K-Dimmable/dp/B0DXFFFQ4H/ref=sr_1_4?crid=2F53BJ0YQNCFG&dib=eyJ2IjoiMSJ9.KAcFSVz4ZuI7JcnZxEHcFkUjvlaYnnYkstCNptBI5ULUjzaYjeZtExGLE1BjWW8R7m20b_J7jjSa60vptFUQBy0mihq66CdaIUSo9X05VZg_PpfGRRakZXy92gUUJiBV3bHYXN1Bl6swYTXx7u88uF72999yaeCs2AFFYbq4RdixsstxqnPhdTQdSqhsqL0-DuJkRWpLAEiRcU97xcyqhDYzbawme0MyOn9FS2wI2I.D_rJKYuNxlzizU-5JxXZx9e9h23Lml7gfQNIS51Wd38&dib_tag=se&keywords=rgb%2Btube%2Blight&qid=1762126409&sprefix=rgb%2Btube%2Blight%2Caps%2C158&sr=8-4&th=1"
            },
            {
                name: "Car",
                price: "$???",
                imageUrl: "https://www.lamborghini.com/sites/it-en/files/DAM/lamborghini/0_facelift_2025/gateway_family/huracan/EVOSpyder-mobile.png",
                buyUrl: "https://www.hyundaiusa.com/us/en/" 
            },
            {
                name: "BB Nano",
                price: "$29.95",
                imageUrl: "https://m.media-amazon.com/images/I/61-1EcYC4tL._AC_SX679_.jpg",
                buyUrl: "https://www.amazon.com/NITECORE-BB-Versatile-Electronic-Photography/dp/B0CSK7ZF7R",
                info: "For cleaning dust off cameras, camera gear, or really anything" 
            },
            {
                name: "Insta360 GO 3 Magnet Pendant",
                price: "$14.99",
                imageUrl: "https://res.insta360.com/dynamic/store/bd3e77c191b3ec9a3e1891c74ec28dae/731_e0dc57c8-6e7e-482c-b670-9091a4c993ee.png?x-oss-process=image%2Fauto-orient%2C1%2Fformat%2Cwebp",
                buyUrl: "https://store.insta360.com/product/go-3s-magnet-pendant?c=3164&from=search-results",
                info: "I lost mine, and after over a year of searching, I don't think it will ever be found",
            },
            {
                name: "40W Dynamic Power Adapter",
                price: "$39.00",
                imageUrl: "https://store.storeimages.cdn-apple.com/1/as-images.apple.com/is/MGKN4?wid=1144&hei=1144&fmt=jpeg&qlt=90&.v=TElibVhiSHBCWitPaGNSaUJtRW5lZ2tuVHYzMERCZURia3c5SzJFOTlPZ01SYWV3QkpzZEx3VDJuSkU1YXBBM0xEQ1ZJK2s5Tklhc1RJUG05ckZjaGc",
                buyUrl: "https://www.apple.com/shop/product/mgkn4am/a/40w-dynamic-power-adapter-with-60w-max?fnode=6326eda5c6de2c9dd5b09a5a41d2e8759b0102ffc8dd100c9f0570c70987aa9b3e88a056b16448b6489fea39caed09e5e42bb29833bc5491f07e6bdf37e66871f2102226f2bb224672a9de9d3d642b58a9dd8a347dc9ad82edf5b5f26e8c16fde47572bf2f9b0de59c6719afc274fbecde37ca125485699e31d96a24cf8ded8d",
                info: "A special charger which helps to preserve battery life in a device",
            },
            {
                name: "Anker iPhone Magsafe charger",
                price: "$36.99",
                imageUrl: "https://www.amazon.com/Anker-MagSafe-Compatible-Wireless-Magnetic-Certified/dp/B0D8PN1GBP/ref=sr_1_5?crid=RZY0A5WLJF4B&dib=eyJ2IjoiMSJ9.aCDOQXz9rcwuflB1dE6XVFYDY2Tbj0DHBQVhvTJEj7i7B-HarurUw9Jq9BzkpHNPxVYTPYcWWgFG1NkzEYY8Duw0_2HHP27qlELK5es8xoAJ3wKxaRvCOKcvt7GBCGTkKaPb9nEQpc-CKv8xXWBtqlce5EyTDC2mdSyycOYPz2u2yp0DVNiLM-vgoTZBa0l0fe5CEWRAvqaxRPWJvvmq4mhDJixc3ls-s6cs2aBiH_0.tHmpk0LVv75ves7LOpU2-MYERTY-qtnYQBTP3EPOE0A&dib_tag=se&keywords=anker%2Bmagsafe%2Biphone%2Bholder%2Bfor%2Bdesk&qid=1764427046&sprefix=anker%2Bmagsafe%2Biphone%2Bholder%2Bfor%2Bdesk%2Caps%2C137&sr=8-5&th=1",
                buyUrl: "https://m.media-amazon.com/images/I/61U8sXviuIL._AC_SX679_.jpg",
                tagline: {
                    text: "Sale",
                    color: "text-festive-red"
                }
            },
            {
                name: "Anker USB C Charger",
                price: "$23.99",
                imageUrl: "https://www.amazon.com/Anker-Charger-Compact-Foldable-MacBook/dp/B09C5RG6KV/ref=sr_1_1?crid=35WGWVK0OJRXX&dib=eyJ2IjoiMSJ9.Y2dNsh7Vv-2BF2XvPaAUjY9EprQyzNjH58C_1D91CfDTPfV6ZtwMMuAfvCEZw4CcRtu2w9a17TmvKRnxIo-B77z2w0XYS3rdLMzV1n6DvbhAOFK-eLSdQtp7Z-gzw86Xya2yIdDBT8P7eNNvvuJJTnPuNKtCdpF9DjgKhJCjqR5tFkQZ-JF9UrlH9N8DvkInObDqzf7bZwPMbBoJGHfsWysMdqfyqFh96QlgavxesZU.U0Y4bwL5C7AwLBjxKc7LussA9rjhb4M2IJplRodcRp4&dib_tag=se&keywords=anker+power+brick&qid=1764426933&sprefix=anker+power+brick%2Caps%2C159&sr=8-1",
                buyUrl: "https://m.media-amazon.com/images/I/5164giE9fFL._AC_SX679_.jpg",
                tagline: {
                    text: "Sale - 40% off",
                    color: "text-festive-red"
                }
            },
            {
                name: "Insta360 Throwpod",
                price: "$49.99",
                imageUrl: "https://res.insta360.com/dynamic/store/ca1ead0c46baef5a1be53d1dff4584d2/404_1eeba67c-cc21-429d-9b25-215c9c465656.png?x-oss-process=image%2Fauto-orient%2C1%2Fformat%2Cwebp",
                buyUrl: "https://store.insta360.com/product/throwpod?c=3944&from=accessory"
            },
            {
                name: "Ridge Tracker Card (So I never lose my wallet)",
                price: "$45.00",
                imageUrl: "https://ridge.com/cdn/shop/files/TrackerCard-THUMBNAIL_4ea6a171-cbc5-46b3-aed5-8c0c3a54b586_2000x.jpg?v=1761926203",
                buyUrl: "https://ridge.com/products/tracker-card" 
            },
            {
                name: "Magnetic Cable Holders (or something similar)",
                price: "$7.27",
                imageUrl: "https://m.media-amazon.com/images/I/71Mf4YQoQ4L._AC_SX679_.jpg",
                buyUrl: "https://www.amazon.com/Adjustable-Management-JOYROOM-Organizer-Nightstand/dp/B0CGRQYCPT/ref=sr_1_2_sspa?crid=2Y0YV2B6HOXPI&dib=eyJ2IjoiMSJ9.4lA3OgXSaDMY6hp5sPMhgZY_2buQhyS8Mejg3ZJoku3ziIudRj4ImIxG3FtcWhcEo8FNu-Th9lPDZixaIfOxZAK0EmrAaV4XSsveuHvs9wYxMFszd_HwST4u2agU71fL8ygdAgHmIDurkSwxpEO61TaWoQtEuNi7Wn29TkSgbxHPmWqLPJfRXhSP5lO2HRnRlbn1_iFee2wEPEe9UCrY6jQ9tb3OiOu55bTNpKEX9MY.xVla47WUqR0VjOyUE0L5I-OeAfRl0lRMkTUld8LYoG8&dib_tag=se&keywords=cable+holder&qid=1762127300&sprefix=cable+holder%2Caps%2C219&sr=8-2-spons&sp_csd=d2lkZ2V0TmFtZT1zcF9hdGY&psc=1",
                tagline: {
                    text: "Sale - 15% off",
                    color: "text-festive-red"
                }
            }
            
        ];
        // --- End of easy-edit section ---
        
        
        
        // --- Core Application Logic (No need to edit below) ---
        
        document.addEventListener('DOMContentLoaded', () => {
            const giftGrid = document.getElementById('gift-grid');
            const snowContainer = document.getElementById('snow-container');
            const cursorDot = document.getElementById('cursor-dot');
            const cursorOutline = document.getElementById('cursor-outline');

            // --- NEW: Calculator State & Helper Functions ---
            const CART_STORAGE_KEY = 'beebupsCalculatorCart'; // Key for localStorage
            let calculatorCart = JSON.parse(localStorage.getItem(CART_STORAGE_KEY) || '[]'); // Load saved cart

            // Helper to parse price strings like "$1,234.56" or "$???" into numbers
            function parsePrice(priceString) {
                if (typeof priceString !== 'string') return 0;
                const cleaned = priceString.replace(/[$,]/g, '');
                const price = parseFloat(cleaned);
                return isNaN(price) ? 0 : price;
            }

            // Helper to format numbers into currency
            function formatCurrency(amount) {
                return new Intl.NumberFormat('en-US', {
                    style: 'currency',
                    currency: 'USD'
                }).format(amount);
            }

            // --- NEW: Save cart to localStorage ---
            function saveCart() {
                localStorage.setItem(CART_STORAGE_KEY, JSON.stringify(calculatorCart));
            }
            // --- End of New Helpers ---


            // 1. Generate Gift Cards
            function renderGifts() {
                if (!giftGrid) return;
                giftGrid.innerHTML = '';
                
                giftList.forEach((gift, index) => { // <-- Added index
                    // NEW: Generate info button/popup HTML if gift.info exists
                    const infoHtml = gift.info ? `
                        <button 
                            class="info-btn" 
                            data-target="info-popup-${index}" 
                            aria-label="More info"
                            title="More info"
                        >
                            i
                        </button>
                        <div class="info-popup" id="info-popup-${index}">
                            ${gift.info}
                        </div>
                    ` : '';

                    const cardHtml = `
                        <a 
                            href="${gift.buyUrl}"
                            target="_blank" 
                            rel="noopener noreferrer"
                            class="gift-card-link reveal-item"
                        >
                            <div 
                                class="gift-card bg-white rounded-lg shadow-2xl w-full overflow-hidden"
                            >
                                <img 
                                    src="${gift.imageUrl}" 
                                    alt="${gift.name}" 
                                    class="w-full h-64 object-cover"
                                    onerror="this.src='https://placehold.co/600x400/6b7280/FFFFFF?text=Image+Missing'; this.onerror=null;"
                                >
                                <div class="p-5 h-1/3 flex flex-col justify-between">
                                    ${infoHtml} <!-- ADDED INFO HTML HERE -->
                                    <div> <!-- Wrapper for top content -->
                                        <!-- NEW: Conditional Tagline -->
                                        ${gift.tagline ? `<p class="${gift.tagline.color} text-sm font-bold mb-1">${gift.tagline.text}</p>` : ''}
                                        <h3 class="text-2xl font-bold text-gray-900">${gift.name}</h3>
                                    </div>
                                    <p class="text-xl text-festive-green font-semibold mt-2">${gift.price}</p>
                                </div>
                            </div>
                        </a>
                    `;
                    giftGrid.insertAdjacentHTML('beforeend', cardHtml);
                });


                // After rendering, initialize new effects
                initScrollReveal();
                initCursorHover();
            }
            
            // 2. Scroll-Reveal Effect
            function initScrollReveal() {
                const revealItems = document.querySelectorAll('.reveal-item');
                
                const observerOptions = {
                    root: null,
                    rootMargin: '0px',
                    threshold: 0.1
                };

                const observer = new IntersectionObserver((entries, observer) => {
                    entries.forEach(entry => {
                        if (entry.isIntersecting) {
                            entry.target.classList.add('is-visible');
                            observer.unobserve(entry.target);
                        }
                    });
                }, observerOptions);

                revealItems.forEach((item, index) => {
                    item.style.setProperty('--reveal-delay', `${index * 100}ms`);
                    observer.observe(item);
                });
            }

            // 3. Custom Cursor Logic
            function initCustomCursor() {
                // Don't run on touch devices
                const isTouchDevice = 'ontouchstart' in window || navigator.maxTouchPoints > 0;
                if (isTouchDevice) return;

                window.addEventListener('mousemove', (e) => {
                    const { clientX, clientY } = e;
                    cursorDot.style.left = `${clientX}px`;
                    cursorDot.style.top = `${clientY}px`;
                    
                    cursorOutline.style.left = `${clientX}px`;
                    cursorOutline.style.top = `${clientY}px`;
                });
            }
            
            // 4. Cursor Hover Effect
            function initCursorHover() {
                // Don't run on touch devices
                const isTouchDevice = 'ontouchstart' in window || navigator.maxTouchPoints > 0;
                if (isTouchDevice) return;
            
                const hoverItems = document.querySelectorAll('.gift-card-link, .info-btn'); // UPDATED to include info-btn
                hoverItems.forEach(item => {
                    item.addEventListener('mouseenter', () => {
                        cursorOutline.classList.add('grow');
                    });
                    item.addEventListener('mouseleave', () => {
                        cursorOutline.classList.remove('grow');
                    });
                });
            }

            // 5. Create Snowflakes
            function createSnowflakes() {
                if (!snowContainer) return;
                const flakeCount = 50;
                for (let i = 0; i < flakeCount; i++) {
                    const flake = document.createElement('div');
                    flake.className = 'snowflake';
                    
                    const size = Math.random() * 5 + 2;
                    flake.style.width = `${size}px`;
                    flake.style.height = `${size}px`;
                    flake.style.left = `${Math.random() * 100}vw`;
                    
                    const duration = Math.random() * 5 + 5;
                    const delay = Math.random() * 5;
                    
                    flake.style.animationDuration = `${duration}s`;
                    flake.style.animationDelay = `${delay}s`;
                    
                    const horizontalDrift = (Math.random() - 0.5) * 10;
                    flake.style.animationName = `fall-${i}`;
                    
                    const keyframes = `
                        @keyframes fall-${i} {
                            0% { transform: translateY(-5vh) translateX(0vw); opacity: 0.8; }
                            100% { transform: translateY(105vh) translateX(${horizontalDrift}vw); opacity: 0.5; }
                        }
                    `;
                    
                    if (!document.getElementById(`snow-style-${i}`)) {
                        const styleSheet = document.createElement("style");
                        styleSheet.id = `snow-style-${i}`;
                        styleSheet.innerText = keyframes;
                        document.head.appendChild(styleSheet);
                    }
                    
                    snowContainer.appendChild(flake);
                }
            }
            
            // 6. Parallax Hero Effect
            function handleScroll() {
                const heroText = document.querySelector('.hero-text');
                const heroHeader = heroText ? heroText.closest('header') : null;
                
                if (heroText && heroHeader) {
                    const scrollY = window.scrollY;
                    const heroHeight = heroHeader.offsetHeight;
                    
                    if (scrollY < heroHeight) {
                        const progress = scrollY / heroHeight;
                        heroText.style.transform = `translateY(${scrollY * 0.4}px)`;
                        heroText.style.opacity = (1 - progress).toString();
                    }
                }
            }

            // 7. Christmas Countdown Timer Logic
            function initCountdown() {
                const daysEl = document.getElementById('countdown-days');
                const hoursEl = document.getElementById('countdown-hours');
                const minutesEl = document.getElementById('countdown-minutes');
                const secondsEl = document.getElementById('countdown-seconds');
                const timerContainer = document.querySelector('.countdown-blocks');
                const messageEl = document.getElementById('countdown-message');
                
                const currentYear = new Date().getFullYear();
                // UPDATED: Check if it's already past Christmas this year
                let christmasYear = currentYear;
                const christmasDayThisYear = new Date(`December 25, ${currentYear} 00:00:00`).getTime();
                const now = new Date().getTime();

                if (now > christmasDayThisYear) {
                    // If it's after Dec 25, count down to *next* year
                    christmasYear = currentYear + 1;
                }
                
                const christmasDay = new Date(`December 25, ${christmasYear} 00:00:00`).getTime();


                function updateCountdown() {
                    const now = new Date().getTime();
                    const distance = christmasDay - now;

                    if (distance < 0) {
                        if (timerContainer) timerContainer.style.display = 'none';
                        if (messageEl) messageEl.style.display = 'block';
                        clearInterval(countdownInterval);
                        return;
                    }

                    const days = Math.floor(distance / (1000 * 60 * 60 * 24));
                    const hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                    const minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
                    const seconds = Math.floor((distance % (1000 * 60)) / 1000);

                    if (daysEl) daysEl.innerText = days.toString().padStart(2, '0');
                    if (hoursEl) hoursEl.innerText = hours.toString().padStart(2, '0');
                    if (minutesEl) minutesEl.innerText = minutes.toString().padStart(2, '0');
                    if (secondsEl) secondsEl.innerText = seconds.toString().padStart(2, '0');
                }

                updateCountdown();
                const countdownInterval = setInterval(updateCountdown, 1000);
            }
            
            // 8. NEW: Wonderland Popup and Music Trigger
            function initWonderland() {
                const music = document.getElementById('bg-music');
                const overlay = document.getElementById('wonderland-overlay');
                const mainContent = document.getElementById('main-content');

                if (!music || !overlay || !mainContent) return;

                async function enterWonderland() {
                    // 1. Play music
                    try {
                        await music.play();
                    } catch (err) {
                        console.log("Music play failed. User may need to interact again.", err);
                    }
                    
                    // 2. Fade out overlay
                    overlay.classList.add('opacity-0');
                    
                    // 3. Remove blur from main content
                    mainContent.classList.remove('blur-md');
                    
                    // 4. After transition, hide overlay completely
                    setTimeout(() => {
                        overlay.classList.add('hidden');
                    }, 500); // Must match transition duration
                }

                // This "once: true" part is key. It runs this function
                // only on the *first* time the user clicks the overlay.
                overlay.addEventListener('click', enterWonderland, { once: true });
            }

            // 9. NEW: Gift Calculator Logic
            function initGiftCalculator() {
                // Get all calculator elements
                const selectEl = document.getElementById('existing-gift-select');
                const addExistingBtn = document.getElementById('add-existing-btn');
                const customNameEl = document.getElementById('custom-gift-name');
                const customPriceEl = document.getElementById('custom-gift-price');
                const addCustomBtn = document.getElementById('add-custom-btn');
                const cartListEl = document.getElementById('calculator-list');
                const totalEl = document.getElementById('calculator-total');

                // --- 9a. Populate Select Dropdown ---
                function populateGiftSelect() {
                    if (!selectEl) return;
                    giftList.forEach((gift, index) => {
                        const price = parsePrice(gift.price);
                        // Only add items that have a valid price
                        if (price > 0) {
                            const option = document.createElement('option');
                            option.value = index.toString();
                            option.textContent = `${gift.name} (${formatCurrency(price)})`;
                            selectEl.appendChild(option);
                        }
                    });
                }

                // --- 9b. Render Cart and Total ---
                function renderCalculator() {
                    if (!cartListEl || !totalEl) return;
                    
                    // Clear current list
                    cartListEl.innerHTML = '';
                    
                    let currentTotal = 0;
                    
                    // Re-render list
                    if (calculatorCart.length === 0) {
                        cartListEl.innerHTML = `<li class="text-gray-400 text-center italic">Your basket is empty</li>`;
                    } else {
                        calculatorCart.forEach((item, index) => {
                            const li = document.createElement('li');
                            li.className = 'flex justify-between items-center bg-gray-700 p-2 rounded';
                            li.innerHTML = `
                                <span class="text-gray-200 pr-2 truncate" title="${item.name}">${item.name}</span>
                                <div class="flex items-center space-x-2">
                                    <span class="font-semibold text-white flex-shrink-0">${formatCurrency(item.price)}</span>
                                    <button class="calculator-btn-red remove-item-btn" data-index="${index}" title="Remove item">&times;</button>
                                </div>
                            `;
                            cartListEl.appendChild(li);
                            currentTotal += item.price;
                        });
                    }
                    
                    // Update total
                    totalEl.textContent = formatCurrency(currentTotal);
                }

                // --- 9c. Add Event Listeners ---
                
                // Add from existing list
                if (addExistingBtn) {
                    addExistingBtn.addEventListener('click', () => {
                        const selectedIndex = selectEl.value;
                        if (selectedIndex === "") return; // No item selected
                        
                        const selectedGift = giftList[parseInt(selectedIndex)];
                        if (selectedGift) {
                            calculatorCart.push({
                                name: selectedGift.name,
                                price: parsePrice(selectedGift.price)
                            });
                            renderCalculator();
                            selectEl.value = ""; // Reset dropdown
                            saveCart(); // NEW: Save cart
                        }
                    });
                }
                
                // Add from custom fields
                if (addCustomBtn) {
                    addCustomBtn.addEventListener('click', () => {
                        const name = customNameEl.value.trim();
                        const price = parseFloat(customPriceEl.value);
                        
                        if (name && !isNaN(price) && price > 0) {
                            calculatorCart.push({
                                name: name,
                                price: price
                            });
                            renderCalculator();
                            // Clear inputs
                            customNameEl.value = '';
                            customPriceEl.value = '';
                            saveCart(); // NEW: Save cart
                        } else {
                            // Simple feedback, you could make this a modal
                            if (!name) customNameEl.focus();
                            if (isNaN(price) || price <= 0) customPriceEl.focus();
                        }
                    });
                }
                
                // Remove from cart (using event delegation)
                if (cartListEl) {
                    cartListEl.addEventListener('click', (e) => {
                        if (e.target.classList.contains('remove-item-btn')) {
                            const indexToRemove = parseInt(e.target.dataset.index);
                            calculatorCart.splice(indexToRemove, 1); // Remove item from array
                            renderCalculator(); // Re-render the list and total
                            saveCart(); // NEW: Save cart
                        }
                    });
                }

                // --- 9d. Initial Load ---
                populateGiftSelect();
                renderCalculator();
            }
            
            // 10. NEW: Info Popup Logic
            function initInfoPopups() {
                const grid = document.getElementById('gift-grid');
                if (!grid) return;

                grid.addEventListener('click', (e) => {
                    // Check if the clicked element is an info button
                    const infoButton = e.target.closest('.info-btn');
                    if (infoButton) {
                        // STOP the click from bubbling up to the <a> tag
                        e.preventDefault();
                        e.stopPropagation();

                        const targetId = infoButton.dataset.target;
                        const popup = document.getElementById(targetId);
                        if (!popup) return;

                        const isVisible = popup.classList.contains('is-visible');

                        // Hide all other popups first
                        document.querySelectorAll('.info-popup.is-visible').forEach(p => {
                            if (p.id !== targetId) {
                                p.classList.remove('is-visible');
                            }
                        });

                        // Toggle the clicked one
                        popup.classList.toggle('is-visible');
                    }
                });

                // Add a global click listener to close popups
                document.addEventListener('click', (e) => {
                    // If the click is not on an info button and not inside a popup
                    if (!e.target.closest('.info-btn') && !e.target.closest('.info-popup')) {
                        document.querySelectorAll('.info-popup.is-visible').forEach(p => {
                            p.classList.remove('is-visible');
                        });
                    }
                });
            }

            // Run all initialization functions
            renderGifts();
            initCustomCursor();
            createSnowflakes();
            initCountdown();
            initWonderland(); 
            initGiftCalculator(); // NEW: Initialize the calculator
            initInfoPopups(); // NEW: Initialize the info popups
            
            // Add the scroll listener
            window.addEventListener('scroll', handleScroll);
        });
    </script>

</body>
</html>
